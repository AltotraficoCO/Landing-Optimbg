const f=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function a(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=a(e);fetch(e.href,o)}};f();document.addEventListener("DOMContentLoaded",()=>{const t={root:null,rootMargin:"0px",threshold:.1},n=new IntersectionObserver((e,o)=>{e.forEach(s=>{s.isIntersecting&&(s.target.classList.add("is-visible"),o.unobserve(s.target))})},t);document.querySelectorAll(".fade-in-section").forEach(e=>{n.observe(e)}),document.querySelectorAll(".js-contact-form").forEach(e=>{e.addEventListener("submit",p)})});async function p(t){var m;t.preventDefault(),t.preventDefault();const n=t.target.querySelector('button[type="submit"]'),a=t.target.querySelector(".form-status");a&&(a.textContent="",a.classList.add("hidden"));const r=t.target.querySelector('input[type="email"]'),e=r?r.value:"";if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e)){c(t.target,"Please enter a valid email address.","text-red-600");return}const s=grecaptcha.getResponse();if(!s){c(t.target,"Please complete the reCAPTCHA verification.","text-red-600");return}const d={name:t.target.querySelector('input[type="text"]').value,phone:t.target.querySelector('input[type="tel"]').value,email:e,project_description:((m=t.target.querySelector("textarea"))==null?void 0:m.value)||"Not provided",recaptcha_token:s,utm_source:i("utm_source"),utm_medium:i("utm_medium"),utm_campaign:i("utm_campaign"),utm_term:i("utm_term"),utm_content:i("utm_content")};n.disabled=!0,n.textContent="Sending...";const l="https://altotrafico-iav1-n8n.tmdjra.easypanel.host/webhook/35739b9e-f443-4a8f-8d75-9e32f6816b6a";try{if((await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)})).ok)c(t.target,"Thanks! Your request has been sent successfully.","text-green-600"),t.target.reset(),grecaptcha.reset();else throw new Error("Server error")}catch(u){u.message==="Webhook URL not configured"?c(t.target,"Configuration Error: Webhook URL not set","text-orange-600"):c(t.target,"Something went wrong. Please try again later.","text-red-600"),console.error("Submission Error:",u)}finally{n.disabled=!1,n.textContent="Submit Request"}}function i(t){return new URLSearchParams(window.location.search).get(t)||""}function c(t,n,a){let r=t.querySelector(".form-status");r||(r=document.createElement("div"),r.className="form-status text-center text-sm font-medium hidden mt-4",t.appendChild(r)),r.textContent=n,r.className=`form-status text-center text-sm font-medium ${a} fade-in-section is-visible mt-4`,r.classList.remove("hidden")}
